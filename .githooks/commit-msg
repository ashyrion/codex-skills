#!/usr/bin/env bash
set -euo pipefail

msg_file="$1"
first_line="$(head -n 1 "$msg_file")"

# Required format: <type>: <korean summary>
if [[ ! "$first_line" =~ ^(feat|fix|refactor|docs|test|chore|perf|ci|build|revert):[[:space:]].+ ]]; then
  echo "ERROR: commit message must use '<type>: <한국어 요약>' format." >&2
  exit 1
fi

# Require at least one Korean character in first line summary
if ! printf '%s' "$first_line" | rg -q "[가-힣]"; then
  echo "ERROR: first line summary must be written in Korean." >&2
  exit 1
fi
